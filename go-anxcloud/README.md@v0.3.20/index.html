<!DOCTYPE html>
<html lang="en">
  <head>
    <title>go.anx.io/go-anxcloud - Go Client for the Anexia API</title>
    <meta http-equiv="content-type" content="text/html; charset=utf-8">
    <meta name="viewport" content="width=900, initial-scale=1.0">
    <link rel="stylesheet" type="text/css" href="/static/style.css">
    <link rel="stylesheet" type="text/css" href="/chroma/style.css">
    <meta name="description" content="go.anx.io/go-anxcloud - Go Client for the Anexia API">
    <meta name="go-import" content="go.anx.io/go-anxcloud git https://github.com/anexia-it/go-anxcloud.git">
    <meta name="go-source" content="go.anx.io/go-anxcloud https://github.com/anexia-it/go-anxcloud https://github.com/anexia-it/go-anxcloud/tree/v0.3.20 https://github.com/anexia-it/go-anxcloud/tree/v0.3.20/README.md">
</head>
  <body >
    <header>
      <h1>go.anx.io/go-anxcloud</h1><hr />
      <nav>
        <a href="https://pkg.go.dev/go.anx.io/go-anxcloud@v0.3.20">API documentation</a>
        <a href="https://github.com/anexia-it/go-anxcloud">Source repository</a>
        <div class="dropdown">
          <label id="versionLabel">Version:</label>
          <menu role="listbox" aria-labelledby="versionLabel">
            <li role="option" aria-selected="false" class="majorVersion">
                <a href="/go-anxcloud/README.md">v1</a>
              </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.6">v0.7.6</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.5">v0.7.5</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.4">v0.7.4</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.3">v0.7.3</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.2">v0.7.2</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.1">v0.7.1</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.7.0">v0.7.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.6.4">v0.6.4</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.6.3">v0.6.3</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.6.2">v0.6.2</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.6.1">v0.6.1</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.6.0">v0.6.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.5.3">v0.5.3</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.5.2">v0.5.2</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.5.1">v0.5.1</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.5.0">v0.5.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.6">v0.4.6</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.5">v0.4.5</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.4">v0.4.4</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.3">v0.4.3</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.2">v0.4.2</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.1">v0.4.1</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.4.0">v0.4.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.28">v0.3.28</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.27">v0.3.27</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.26">v0.3.26</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.25">v0.3.25</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.24">v0.3.24</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.23">v0.3.23</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.22">v0.3.22</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.21">v0.3.21</a>
                </li>
              <li role="option" aria-selected="true">
                  <a href="/go-anxcloud/README.md@v0.3.20">v0.3.20</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.19">v0.3.19</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.18">v0.3.18</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.17">v0.3.17</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.16">v0.3.16</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.15">v0.3.15</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.14">v0.3.14</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.13">v0.3.13</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.12">v0.3.12</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.11">v0.3.11</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.10">v0.3.10</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.9">v0.3.9</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.8">v0.3.8</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.7">v0.3.7</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.6">v0.3.6</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.5">v0.3.5</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.4">v0.3.4</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.3">v0.3.3</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.2">v0.3.2</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.1">v0.3.1</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.3.0">v0.3.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.2.0">v0.2.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@v0.1.0">v0.1.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@main">main</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@update-go1.22">update-go1.22</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@syseng-923/ipam-generic-client">syseng-923/ipam-generic-client</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@syseng-728/cancel-object-channel">syseng-728/cancel-object-channel</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@mgmt-bindings">mgmt-bindings</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@lbaasv2-cs">lbaasv2-cs</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@dependabot/go_modules/github.com/onsi/ginkgo/v2-2.22.0">dependabot/go_modules/github.com/onsi/ginkgo/v2-2.22.0</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@decode-prefix-vlans">decode-prefix-vlans</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@SYSENG-679/virtualmachine">SYSENG-679/virtualmachine</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@SYSENG-1741">SYSENG-1741</a>
                </li>
              <li role="option" aria-selected="false">
                  <a href="/go-anxcloud/README.md@SYSENG-1670/make-vm-nics-updatable">SYSENG-1670/make-vm-nics-updatable</a>
                </li>
              </menu>
        </div>
        <a class="common" href="/">Discover more packages</a>
      </nav>
    
    </header>
    <main>
      <p><a href="http://godoc.org/github.com/anexia-it/go-anxcloud"><img src="https://godoc.org/github.com/anexia-it/go-anxcloud?status.svg" alt="Documentation"></a></p>
<h1 id="go-client-for-the-anexia-api">Go Client for the Anexia API</h1>
<p>Go SDK for interacting with the Anexia multi purpose <a href="https://engine.anexia-it.com/">API</a>.</p>
<h2 id="installing">Installing</h2>
<p>To use the SDK, just add <code>github.com/anexia-it/go-anxcloud &lt;version&gt;</code> to your Go module.</p>
<h2 id="getting-started">Getting started</h2>
<p>Before using the SDK you should familiarize yourself with the API. See <a href="https://engine.anexia-it.com/docs/">here</a> for more info.
I you crave for an example, take a look at <a href="https://github.com/anexia-it/terraform-provider-anxcloud">the terraform provider for this project</a></p>
<h2 id="example">Example</h2>
<p>The following code shows how to create a VM. To be able to do that you need to set the environment variable <code>ANEXIA_TOKEN</code> to your access token.
Afterwards you can run the following.</p>
<pre tabindex="0" class="chroma"><code><span class="line"><span class="ln" id="code-1-1"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-1"> 1</a></span><span class="cl"><span class="kn">package</span> <span class="nx">main</span>
</span></span><span class="line"><span class="ln" id="code-1-2"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-2"> 2</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-3"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-3"> 3</a></span><span class="cl"><span class="kn">import</span> <span class="p">(</span>
</span></span><span class="line"><span class="ln" id="code-1-4"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-4"> 4</a></span><span class="cl">	<span class="s">&#34;context&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-5"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-5"> 5</a></span><span class="cl">	<span class="s">&#34;fmt&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-6"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-6"> 6</a></span><span class="cl">	<span class="s">&#34;time&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-7"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-7"> 7</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-8"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-8"> 8</a></span><span class="cl">	<span class="nx">anexia</span> <span class="s">&#34;github.com/anexia-it/go-anxcloud/pkg&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-9"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-9"> 9</a></span><span class="cl">	<span class="s">&#34;github.com/anexia-it/go-anxcloud/pkg/client&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-10"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-10">10</a></span><span class="cl">	<span class="s">&#34;github.com/anexia-it/go-anxcloud/pkg/vsphere/provisioning/vm&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-11"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-11">11</a></span><span class="cl"><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-12"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-12">12</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-13"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-13">13</a></span><span class="cl"><span class="kd">func</span> <span class="nf">main</span><span class="p">(</span><span class="p">)</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-14"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-14">14</a></span><span class="cl">	<span class="nx">vlan</span> <span class="o">:=</span> <span class="s">&#34;&lt;ID of the VLAN the VM should have access to&gt;&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-15"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-15">15</a></span><span class="cl">	<span class="nx">location</span> <span class="o">:=</span> <span class="s">&#34;&lt;ID of the location the VM should be in&gt;&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-16"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-16">16</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-17"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-17">17</a></span><span class="cl">	<span class="c1">// Create client from environment variables, do not unset env afterwards.
</span></span></span><span class="line"><span class="ln" id="code-1-18"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-18">18</a></span><span class="cl"><span class="c1"></span>	<span class="nx">c</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">client</span><span class="p">.</span><span class="nf">New</span><span class="p">(</span><span class="nx">client</span><span class="p">.</span><span class="nf">AuthFromEnv</span><span class="p">(</span><span class="kc">false</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-19"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-19">19</a></span><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-20"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-20">20</a></span><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;could not create client: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-21"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-21">21</a></span><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-22"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-22">22</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-23"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-23">23</a></span><span class="cl">	<span class="c1">// Get some API.
</span></span></span><span class="line"><span class="ln" id="code-1-24"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-24">24</a></span><span class="cl"><span class="c1"></span>	<span class="nx">provisioning</span> <span class="o">:=</span> <span class="nx">anexia</span><span class="p">.</span><span class="nf">NewAPI</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="p">.</span><span class="nf">VSphere</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Provisioning</span><span class="p">(</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-25"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-25">25</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-26"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-26">26</a></span><span class="cl">	<span class="c1">// Time out after 30 minutes. Yes it really takes that long sometimes.
</span></span></span><span class="line"><span class="ln" id="code-1-27"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-27">27</a></span><span class="cl"><span class="c1"></span>	<span class="nx">ctx</span><span class="p">,</span> <span class="nx">cancel</span> <span class="o">:=</span> <span class="nx">context</span><span class="p">.</span><span class="nf">WithTimeout</span><span class="p">(</span><span class="nx">context</span><span class="p">.</span><span class="nf">Background</span><span class="p">(</span><span class="p">)</span><span class="p">,</span> <span class="mi">30</span><span class="o">*</span><span class="nx">time</span><span class="p">.</span><span class="nx">Minute</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-28"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-28">28</a></span><span class="cl">	<span class="c1">// Look for a free ip in the given VLAN. This IP is not reserved for you so better be quick.
</span></span></span><span class="line"><span class="ln" id="code-1-29"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-29">29</a></span><span class="cl"><span class="c1"></span>	<span class="nx">ips</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">provisioning</span><span class="p">.</span><span class="nf">IPs</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">GetFree</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">location</span><span class="p">,</span> <span class="nx">vlan</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-30"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-30">30</a></span><span class="cl">	<span class="k">defer</span> <span class="nf">cancel</span><span class="p">(</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-31"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-31">31</a></span><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-32"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-32">32</a></span><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;provisioning vm failed: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-33"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-33">33</a></span><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-34"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-34">34</a></span><span class="cl">	<span class="k">if</span> <span class="nb">len</span><span class="p">(</span><span class="nx">ips</span><span class="p">)</span> <span class="p">&lt;</span> <span class="mi">1</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-35"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-35">35</a></span><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;no IPs left for testing in vlan&#34;</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-36"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-36">36</a></span><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-37"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-37">37</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-38"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-38">38</a></span><span class="cl">	<span class="c1">// Create a NIC for the VM and connect it to the VLAN.
</span></span></span><span class="line"><span class="ln" id="code-1-39"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-39">39</a></span><span class="cl"><span class="c1"></span>	<span class="nx">networkInterfaces</span> <span class="o">:=</span> <span class="p">[</span><span class="p">]</span><span class="nx">vm</span><span class="p">.</span><span class="nx">Network</span><span class="p">{</span><span class="p">{</span><span class="nx">NICType</span><span class="p">:</span> <span class="s">&#34;vmxnet3&#34;</span><span class="p">,</span> <span class="nx">IPs</span><span class="p">:</span> <span class="p">[</span><span class="p">]</span><span class="kt">string</span><span class="p">{</span><span class="nx">ips</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span><span class="p">.</span><span class="nx">Identifier</span><span class="p">}</span><span class="p">,</span> <span class="nx">VLAN</span><span class="p">:</span> <span class="nx">vlan</span><span class="p">}</span><span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-40"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-40">40</a></span><span class="cl">	<span class="c1">// Create the definition of the new VM. The ID you see here is Flatcar.
</span></span></span><span class="line"><span class="ln" id="code-1-41"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-41">41</a></span><span class="cl"><span class="c1"></span>	<span class="nx">definition</span> <span class="o">:=</span> <span class="nx">vm</span><span class="p">.</span><span class="nf">NewAPI</span><span class="p">(</span><span class="nx">c</span><span class="p">)</span><span class="p">.</span><span class="nf">NewDefinition</span><span class="p">(</span><span class="nx">location</span><span class="p">,</span> <span class="s">&#34;template&#34;</span><span class="p">,</span> <span class="s">&#34;44b38284-6adb-430e-b4a4-1553e29f352f&#34;</span><span class="p">,</span> <span class="s">&#34;developersfirstvm&#34;</span><span class="p">,</span> <span class="mi">2</span><span class="p">,</span> <span class="mi">2048</span><span class="p">,</span> <span class="mi">10</span><span class="p">,</span> <span class="nx">networkInterfaces</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-42"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-42">42</a></span><span class="cl">	<span class="nx">definition</span><span class="p">.</span><span class="nx">SSH</span> <span class="p">=</span> <span class="s">&#34;&lt;your SSH pub key&gt;&#34;</span>
</span></span><span class="line"><span class="ln" id="code-1-43"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-43">43</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-44"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-44">44</a></span><span class="cl">	<span class="c1">// Provision the VM.
</span></span></span><span class="line"><span class="ln" id="code-1-45"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-45">45</a></span><span class="cl"><span class="c1"></span>	<span class="nx">provisionResponse</span><span class="p">,</span> <span class="nx">err</span> <span class="o">:=</span> <span class="nx">provisioning</span><span class="p">.</span><span class="nf">VM</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">Provision</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">definition</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-46"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-46">46</a></span><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-47"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-47">47</a></span><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;provisioning vm failed: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-48"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-48">48</a></span><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-49"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-49">49</a></span><span class="cl">
</span></span><span class="line"><span class="ln" id="code-1-50"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-50">50</a></span><span class="cl">	<span class="c1">// Wait for the VM to be ready.
</span></span></span><span class="line"><span class="ln" id="code-1-51"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-51">51</a></span><span class="cl"><span class="c1"></span>	<span class="nx">_</span><span class="p">,</span> <span class="nx">err</span> <span class="p">=</span> <span class="nx">provisioning</span><span class="p">.</span><span class="nf">Progress</span><span class="p">(</span><span class="p">)</span><span class="p">.</span><span class="nf">AwaitCompletion</span><span class="p">(</span><span class="nx">ctx</span><span class="p">,</span> <span class="nx">provisionResponse</span><span class="p">.</span><span class="nx">Identifier</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-52"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-52">52</a></span><span class="cl">	<span class="k">if</span> <span class="nx">err</span> <span class="o">!=</span> <span class="kc">nil</span> <span class="p">{</span>
</span></span><span class="line"><span class="ln" id="code-1-53"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-53">53</a></span><span class="cl">		<span class="nb">panic</span><span class="p">(</span><span class="nx">fmt</span><span class="p">.</span><span class="nf">Sprintf</span><span class="p">(</span><span class="s">&#34;waiting for VM provisioning failed: %v&#34;</span><span class="p">,</span> <span class="nx">err</span><span class="p">)</span><span class="p">)</span>
</span></span><span class="line"><span class="ln" id="code-1-54"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-54">54</a></span><span class="cl">	<span class="p">}</span>
</span></span><span class="line"><span class="ln" id="code-1-55"><a style="outline: none; text-decoration:none; color:inherit" href="#code-1-55">55</a></span><span class="cl"><span class="p">}</span>
</span></span></code></pre>
    </main>
    <footer>
      <hr />
      <span class="buildinfo">Generated on
        <span title="2024-12-18T10:57:31Z">
          2024-12-18
        </span>
        from 
        <a href="https://github.com/anexia/go.anx.io/tree/b3bfb206ef8b068186d2f2ee7338a35cf1beabc4">main</a></span>
      <span class="copyright">&copy; 2006 - 2024 Anexia Internetdienstleistungs GmbH</span>
    </footer>
  </body>
</html>